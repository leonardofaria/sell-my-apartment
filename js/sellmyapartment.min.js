/*! PhotoSwipe - v4.0.2 - 2014-12-21
* http://photoswipe.com
* Copyright (c) 2014 Dmitry Semenov; */
(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof exports==="object"){module.exports=b()}else{a.PhotoSwipe=b()}}})(this,function(){var a=function(aX,bn,ch,bo){var br={features:null,bind:function(cs,cq,cr,cp){var p=(cp?"remove":"add")+"EventListener";cq=cq.split(" ");for(var co=0;co<cq.length;co++){if(cq[co]){cs[p](cq[co],cr,false)}}},isArray:function(p){return(p instanceof Array)},createEl:function(co,p){var cp=document.createElement(p||"div");if(co){cp.className=co}return cp},getScrollY:function(){var p=window.pageYOffset;return p!==undefined?p:document.documentElement.scrollTop},unbind:function(cp,p,co){br.bind(cp,p,co,true)},removeClass:function(cp,co){var p=new RegExp("(\\s|^)"+co+"(\\s|$)");cp.className=cp.className.replace(p," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(co,p){if(!br.hasClass(co,p)){co.className+=(co.className?" ":"")+p}},hasClass:function(co,p){return co.className&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(co.className)},arraySearch:function(cq,cp,co){var p=cq.length;while(p--){if(cq[p][co]===cp){return p}}return -1},extend:function(cp,co,p){for(var cq in co){if(co.hasOwnProperty(cq)){if(p&&cp.hasOwnProperty(cq)){continue}cp[cq]=co[cq]}}},easing:{sine:{out:function(p){return Math.sin(p*(Math.PI/2))},inOut:function(p){return -(Math.cos(Math.PI*p)-1)/2}},cubic:{out:function(p){return --p*p*p+1}}},detectFeatures:function(){if(br.features){return br.features}var cq=br.createEl(),cu=cq.style,cx="",cp={};cp.oldIE=document.all&&!document.addEventListener;cp.touch="ontouchstart" in window;if(window.requestAnimationFrame){cp.raf=window.requestAnimationFrame;cp.caf=window.cancelAnimationFrame}cp.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled;if(!cp.pointerEvent){var co=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var cy=(navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);if(cy&&cy.length>0){cy=parseInt(cy[1],10);if(cy>=1&&cy<8){cp.isOldIOSPhone=true}}}var ct=co.match(/Android\s([0-9\.]*)/);var cA=ct?ct[1]:0;cA=parseFloat(cA);if(cA>=1){if(cA<4.4){cp.isOldAndroid=true}cp.androidVersion=cA}cp.isMobileOpera=/opera mini|opera mobi/i.test(co)}var cv=["transform","perspective","animationName"],cz=["","webkit","Moz","ms","O"],cB,cr;for(var cs=0;cs<4;cs++){cx=cz[cs];for(var cw=0;cw<3;cw++){cB=cv[cw];cr=cx+(cx?cB.charAt(0).toUpperCase()+cB.slice(1):cB);if(!cp[cB]&&cr in cu){cp[cB]=cr}}if(cx&&!cp.raf){cx=cx.toLowerCase();cp.raf=window[cx+"RequestAnimationFrame"];if(cp.raf){cp.caf=window[cx+"CancelAnimationFrame"]||window[cx+"CancelRequestAnimationFrame"]}}}if(!cp.raf){var p=0;cp.raf=function(cD){var cC=new Date().getTime();var cE=Math.max(0,16-(cC-p));var cF=window.setTimeout(function(){cD(cC+cE)},cE);p=cC+cE;return cF};cp.caf=function(cC){clearTimeout(cC)}}cp.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;br.features=cp;return cp}};br.detectFeatures();if(br.features.oldIE){br.bind=function(ct,cr,cs,cq){cr=cr.split(" ");var p=(cq?"detach":"attach")+"Event",cp,cu=function(){cs.handleEvent.call(cs)};for(var co=0;co<cr.length;co++){cp=cr[co];if(cp){if(typeof cs==="object"&&cs.handleEvent){if(!cq){cs["oldIE"+cp]=cu}else{if(!cs["oldIE"+cp]){return false}}ct[p]("on"+cp,cs["oldIE"+cp])}else{ct[p]("on"+cp,cs)}}}}}var aY=this;var C=25,I=3;var Y={allowPanToNext:true,spacing:0.12,bgOpacity:1,mouseUsed:false,loop:true,pinchToClose:true,closeOnScroll:true,closeOnVerticalDrag:true,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:false,focus:true,escKey:true,arrowKeys:true,mainScrollEndFriction:0.35,panEndFriction:0.35,isClickableElement:function(p){return p.tagName==="A"},scaleMode:"fit",modal:true,alwaysFadeIn:false};br.extend(Y,bo);var bE=function(){return{x:0,y:0}};var E,bL,bx,bz,l,V,ai=0,Q=bE(),cl=bE(),ah=bE(),j=bE(),by,a3,aE,bU={},bA,bF,at,b6,D,bi=0,b7=0,bB=bE(),a7,ao,q,aS=0,B,bg,H,O,b0,ad,aa=true,b9,aN=[],a2,aU,ab,ay,bb,bV,a4,P={},aG=function(p,co){br.extend(aY,co.publicMethods);aN.push(p)},bs=function(p){var co=aO();if(p>co-1){return p-co}else{if(p<0){return co+p}}return p},b8={},a1=function(p,co){if(!b8[p]){b8[p]=[]}return b8[p].push(co)},ak=function(co){var cq=b8[co];if(cq){var p=Array.prototype.slice.call(arguments);p.shift();for(var cp=0;cp<cq.length;cp++){cq[cp].apply(aY,p)}}},al=function(){return new Date().getTime()},e=function(p){aA=p;aY.bg.style.opacity=p*Y.bgOpacity},r=function(cp,p,cq,co){cp[b0]=at+p+"px, "+cq+"px"+b6+" scale("+co+")"},ag=function(){if(be){r(be,ah.x,ah.y,bA)}},ck=function(p){if(p.container){r(p.container.style,p.initialPosition.x,p.initialPosition.y,p.initialZoomLevel)}},bK=function(p,co){co[b0]=at+p+"px, 0px"+b6},Z=function(p,cp){if(!Y.loop&&cp){var co=bz+(bB.x*bi-p)/bB.x;var cq=Math.round(p-aD.x);if((co<0&&cq>0)||(co>=aO()-1&&cq<0)){p=aD.x+cq*Y.mainScrollEndFriction}}aD.x=p;bK(p,l)},G=function(p){return 1/M*p*bF},aJ=function(co,cp){var p=an[co]-bN[co];return cl[co]+Q[co]+p-p*(cp/bF)},R=function(co,p){return co.x===p.x&&co.y===p.y},bH=function(co,p){return(Math.abs(co.x-p.x)<C&&Math.abs(co.y-p.y)<C)},a0=function(co,p){co.x=p.x;co.y=p.y;if(p.id){co.id=p.id}},bS=function(){br.bind(document,"keydown",aY);if(a4.transform){br.bind(aY.scrollWrap,"click",aY)}if(!Y.mouseUsed){br.bind(document,"mousemove",az)}br.bind(window,"resize scroll",aY);ak("bindEvents")},am=function(){br.unbind(window,"resize",aY);br.unbind(window,"scroll",aE.scroll);br.unbind(document,"keydown",aY);br.unbind(document,"mousemove",az);if(a4.transform){br.unbind(aY.scrollWrap,"click",aY)}if(bM){br.unbind(window,by,aY)}ak("unbindEvents")},s=null,az=function(){if(s){br.unbind(document,"mousemove",az);br.addClass(aX,"pswp--has_mouse");Y.mouseUsed=true;ak("mouseUsed")}s=setTimeout(function(){s=null},100)},aF=function(co,cp){var p=N(aY.currItem,bU,co);if(cp){cd=p}return p},b4=function(cp,cq,p,co){if(co===aY.currItem.initialZoomLevel){p[cp]=aY.currItem.initialPosition[cp];return true}else{p[cp]=aJ(cp,co);if(p[cp]>cq.min[cp]){p[cp]=cq.min[cp];return true}else{if(p[cp]<cq.max[cp]){p[cp]=cq.max[cp];return true}}}return false};var af={},cb=0,bh=function(p){if(af[p]){if(af[p].raf){aU(af[p].raf)}cb--;delete af[p]}},x=function(p){if(af[p]){bh(p)}if(!af[p]){cb++;af[p]={}}},aV=function(){for(var p in af){if(af.hasOwnProperty(p)){bh(p)}}},av=function(p,cv,cr,cu,co,cq,cp){var ct=al(),cw;x(p);var cs=function(){if(af[p]){cw=al()-ct;if(cw>=cu){bh(p);cq(cr);if(cp){cp()}return}cq((cr-cv)*co(cw/cu)+cv);af[p].raf=a2(cs)}};cs()},b1,aH=function(cv,cq,cp,cu){if(b1){clearTimeout(b1)}bp=true;bC=true;var cs;if(cv.initialLayout){cs=cv.initialLayout;cv.initialLayout=null}else{cs=Y.getThumbBoundsFn&&Y.getThumbBoundsFn(bz)}var p=function(){bh("initialZoom");if(!cp){e(1);if(cq){cq.style.display="block"}br.addClass(aX,"pswp--animated-in");ak("initialZoom"+(cp?"OutEnd":"InEnd"))}else{aY.template.removeAttribute("style");aY.bg.removeAttribute("style")}if(cu){cu()}bp=false};var co=cp?Y.hideAnimationDuration:Y.showAnimationDuration;if(!cs||cs.x===undefined||!co){ak("initialZoom"+(cp?"Out":"In"));bA=cv.initialZoomLevel;a0(ah,cv.initialPosition);ag();aX.style.opacity=cp?0:1;e(1);p();return false}var cr=bx;var ct=!aY.currItem.src||aY.currItem.loadError||Y.showHideOpacity;if(cv.miniImg){cv.miniImg.style.webkitBackfaceVisibility="hidden"}if(!cp){bA=cs.w/cv.w;ah.x=cs.x;ah.y=cs.y-ay;aY[ct?"template":"bg"].style.opacity=0.001;ag()}x("initialZoom");if(cp&&!cr){br.removeClass(aX,"pswp--animated-in")}if(ct){if(cp){br[(cr?"remove":"add")+"Class"](aX,"pswp--animate_opacity")}else{setTimeout(function(){br.addClass(aX,"pswp--animate_opacity")},30)}}b1=setTimeout(function(){ak("initialZoom"+(cp?"Out":"In"));if(!cp){bA=cv.initialZoomLevel;a0(ah,cv.initialPosition);ag();e(1);if(ct){aX.style.opacity=1}else{e(1)}b1=setTimeout(p,co+20)}else{var cx=cs.w/cv.w,cz={x:ah.x,y:ah.y},cB=bA,cA=ay,cy=aA,cw=function(cC){if(a7){cA=br.getScrollY();a7=false}if(cC===1){bA=cx;ah.x=cs.x;ah.y=cs.y-cA}else{bA=(cx-cB)*cC+cB;ah.x=(cs.x-cz.x)*cC+cz.x;ah.y=(cs.y-cA-cz.y)*cC+cz.y}ag();if(ct){aX.style.opacity=1-cC}else{e(cy-cC*cy)}};if(cr){av("initialZoom",0,1,co,br.easing.cubic.out,cw,p)}else{cw(1);b1=setTimeout(p,co+20)}}},cp?25:90);return true};var ce={shout:ak,listen:a1,viewportSize:bU,options:Y,isMainScrollAnimating:function(){return U},getZoomLevel:function(){return bA},getCurrentIndex:function(){return bz},isDragging:function(){return bM},isZooming:function(){return a8},applyZoomPan:function(cp,co,p){ah.x=co;ah.y=p;bA=cp;ag()},init:function(){if(E||bL){return}var cp;aY.framework=br;aY.template=aX;aY.bg=aX.children[0];ab=aX.className;E=true;a4=br.detectFeatures();a2=a4.raf;aU=a4.caf;b0=a4.transform;bb=a4.oldIE;aY.scrollWrap=aX.children[1];aY.container=aY.scrollWrap.children[0];l=aY.container.style;if(!b0){b0="left";br.addClass(aX,"pswp--ie");bK=function(ct,cu){cu.left=ct+"px"};ck=function(cw){var cv=cw.container.style,ct=cw.fitRatio*cw.w,cu=cw.fitRatio*cw.h;cv.width=ct+"px";cv.height=cu+"px";cv.left=cw.initialPosition.x+"px";cv.top=cw.initialPosition.y+"px"};ag=function(){if(be){var cv=be;var cw=aY.currItem;var ct=cw.fitRatio*cw.w;var cu=cw.fitRatio*cw.h;cv.width=ct+"px";cv.height=cu+"px";cv.left=ah.x+"px";cv.top=ah.y+"px"}}}else{var cr=a4.perspective&&!b9;at="translate"+(cr?"3d(":"(");b6=a4.perspective?", 0px)":")"}var cq=function(cu,cx,cv,ct,cw){B=cu+cx;bg=cu+cv;H=cu+ct;if(cw){O=cu+cw}else{O=""}};aY.itemHolders=ao=[{el:aY.container.children[0],wrap:0,index:-1},{el:aY.container.children[1],wrap:0,index:-1},{el:aY.container.children[2],wrap:0,index:-1}];ao[0].el.style.display=ao[2].el.style.display="none";ad=a4.pointerEvent;if(ad&&a4.touch){a4.touch=false}if(ad){if(navigator.pointerEnabled){cq("pointer","down","move","up","cancel")}else{cq("MSPointer","Down","Move","Up","Cancel")}}else{if(a4.touch){cq("touch","start","move","end","cancel");b9=true}else{cq("mouse","down","move","up")}}by=bg+" "+H+" "+O;a3=B;if(ad&&!b9){b9=(navigator.maxTouchPoints>1)||(navigator.msMaxTouchPoints>1)}aY.likelyTouchDevice=b9;if(!a4.animationName||!a4.transform||a4.isOldIOSPhone||a4.isOldAndroid||a4.isMobileOpera){Y.showAnimationDuration=Y.hideAnimationDuration=0}for(cp=0;cp<aN.length;cp++){aY["init"+aN[cp]]()}if(bn){var cs=aY.ui=new bn(aY,br);cs.init()}if(!b9){Y.allowPanToNext=false}var co;aE={resize:aY.updateSize,scroll:function(){a7=true;if(Y.closeOnScroll&&E&&(!aY.likelyTouchDevice||Y.mouseUsed)){if(Math.abs(br.getScrollY()-ay)>2){bx=true;aY.close()}}},keydown:function(ct){co="";if(Y.escKey&&ct.keyCode===27){co="close"}else{if(Y.arrowKeys){if(ct.keyCode===37){co="prev"}else{if(ct.keyCode===39){co="next"}}}}if(co){if(!ct.ctrlKey&&!ct.altKey&&!ct.shiftKey&&!ct.metaKey){if(ct.preventDefault){ct.preventDefault()}else{ct.returnValue=false}aY[co]()}}},click:function(ct){if(ae||cf||U||bj){ct.preventDefault();ct.stopPropagation()}}};aE[B]=bR;aE[bg]=aI;aE[H]=F;if(O){aE[O]=aE[H]}if(a4.touch){a3+=" mousedown";by+=" mousemove mouseup";aE.mousedown=aE[B];aE.mousemove=aE[bg];aE.mouseup=aE[H]}ak("firstUpdate");bz=bz||Y.index||0;if(isNaN(bz)||bz<0||bz>=aO()){bz=0}aY.currItem=bu(bz);if(a4.isOldIOSPhone||a4.isOldAndroid){aa=false}if(Y.modal){aX.setAttribute("aria-hidden","false");if(!aa){aX.style.position="absolute";aX.style.top=br.getScrollY()+"px"}else{aX.style.position="fixed"}}if(bV===undefined){ak("initialLayout");bV=ay=br.getScrollY()}var p="pswp--open ";if(Y.mainClass){p+=Y.mainClass+" "}if(Y.showHideOpacity){p+="pswp--animate_opacity "}p+=b9?"pswp--touch":"pswp--notouch";p+=a4.animationName?" pswp--css_animation":"";p+=a4.svg?" pswp--svg":"";br.addClass(aX,p);aY.updateSize();V=-1;aS=null;for(cp=0;cp<I;cp++){bK((cp+V)*bB.x,ao[cp].el.style)}if(!bb){br.bind(aY.scrollWrap,a3,aY)}a1("initialZoomInEnd",function(){aY.setContent(ao[0],bz-1);aY.setContent(ao[2],bz+1);ao[0].el.style.display=ao[2].el.style.display="block";if(Y.focus){aX.focus()}bS()});aY.setContent(ao[1],bz);aY.updateCurrItem();ak("afterInit");if(!aa){D=setInterval(function(){if(!cb&&!bM&&!a8&&(bA===aY.currItem.initialZoomLevel)){aY.updateSize()}},1000)}br.addClass(aX,"pswp--visible")},close:function(){if(!E){return}E=false;bL=true;ak("close");am();aH(aY.currItem,null,true,aY.destroy)},destroy:function(){ak("destroy");if(b1){clearTimeout(b1)}if(Y.modal){aX.setAttribute("aria-hidden","true");aX.className=ab}if(D){clearInterval(D)}br.unbind(aY.scrollWrap,a3,aY);br.unbind(window,"scroll",aY);ca();aV();b8=null},panTo:function(p,cp,co){if(!co){if(p>cd.min.x){p=cd.min.x}else{if(p<cd.max.x){p=cd.max.x}}if(cp>cd.min.y){cp=cd.min.y}else{if(cp<cd.max.y){cp=cd.max.y}}}ah.x=p;ah.y=cp;ag()},handleEvent:function(p){p=p||window.event;if(aE[p.type]){aE[p.type](p)}},goTo:function(p){p=bs(p);var co=p-bz;aS=co;bz=p;aY.currItem=bu(bz);bi-=co;Z(bB.x*bi);aV();U=false;aY.updateCurrItem()},next:function(){aY.goTo(bz+1)},prev:function(){aY.goTo(bz-1)},updateCurrZoomItem:function(p){if(p){ak("beforeChange",0)}if(ao[1].el.children.length){var co=ao[1].el.children[0];if(br.hasClass(co,"pswp__zoom-wrap")){be=co.style}else{be=null}}else{be=null}cd=aY.currItem.bounds;bF=bA=aY.currItem.initialZoomLevel;ah.x=cd.center.x;ah.y=cd.center.y;if(p){ak("afterChange")}},invalidateCurrItems:function(){for(var p=0;p<I;p++){if(ao[p].item){ao[p].item.needsUpdate=true}}},updateCurrItem:function(co){if(aS===0){return}var cr=Math.abs(aS),cq;if(co&&cr<2){return}aY.currItem=bu(bz);ak("beforeChange",aS);if(cr>=I){V+=aS+(aS>0?-I:I);cr=I}for(var cp=0;cp<cr;cp++){if(aS>0){cq=ao.shift();ao[I-1]=cq;V++;bK((V+2)*bB.x,cq.el.style);aY.setContent(cq,bz-cr+cp+1+1)}else{cq=ao.pop();ao.unshift(cq);V--;bK(V*bB.x,cq.el.style);aY.setContent(cq,bz+cr-cp-1-1)}}if(be&&Math.abs(aS)===1){var p=bu(q);if(p.initialZoomLevel!==bA){N(p,bU);ck(p)}}aS=0;aY.updateCurrZoomItem();q=bz;ak("afterChange")},updateSize:function(cr){if(!aa){var cp=br.getScrollY();if(bV!==cp){aX.style.top=cp+"px";bV=cp}if(!cr&&P.x===window.innerWidth&&P.y===window.innerHeight){return}P.x=window.innerWidth;P.y=window.innerHeight;aX.style.height=P.y+"px"}bU.x=aY.scrollWrap.clientWidth;bU.y=aY.scrollWrap.clientHeight;bN={x:0,y:bV};bB.x=bU.x+Math.round(bU.x*Y.spacing);bB.y=bU.y;Z(bB.x*bi);ak("beforeResize");if(V!==undefined){var co,cq;for(var p=0;p<I;p++){co=ao[p];bK((p+V)*bB.x,co.el.style);cq=bu(co.index);if(cq.needsUpdate){aY.cleanSlide(cq);aY.setContent(co,co.index);if(p===1){aY.updateCurrZoomItem(true)}cq.needsUpdate=false}if(cq&&cq.container){N(cq,bU);ck(cq)}}}bF=bA=aY.currItem.initialZoomLevel;cd=aY.currItem.bounds;if(cd){ah.x=cd.center.x;ah.y=cd.center.y;ag()}ak("resize")},zoomTo:function(cv,cs,cp,p,cr){if(cs){bF=bA;an.x=Math.abs(cs.x)-ah.x;an.y=Math.abs(cs.y)-ah.y;a0(cl,ah)}var cq=aF(cv,false),ct={};b4("x",cq,ct,cv);b4("y",cq,ct,cv);var cw=bA;var cu={x:ah.x,y:ah.y};var co=function(cx){if(cx===1){bA=cv;ah.x=ct.x;ah.y=ct.y}else{bA=(cv-cw)*cx+cw;ah.x=(ct.x-cu.x)*cx+cu.x;ah.y=(ct.y-cu.y)*cx+cu.y}if(cr){cr(cx)}ag()};if(cp){av("customZoomTo",0,1,cp,p||br.easing.sine.inOut,co)}else{co(1)}}};var aB=30,S=10;var d,ax,bv={},bO={},m={},a6={},b5={},a5=[],cg={},aw,z=[],t,bP={},bj,ac,bM,bm,cf,ae,bG,J,aq,a8,K,M,cd,aD=bE(),be,U,an=bE(),i=bE(),bc,bN,ap,aM,aA,c,aK=function(co,p){bP.x=Math.abs(co.x-p.x);bP.y=Math.abs(co.y-p.y);return Math.sqrt(bP.x*bP.x+bP.y*bP.y)},ca=function(){if(bG){aU(bG);bG=null}},ci=function(){if(bM){bG=a2(ci);bZ()}},cn=function(){return !(Y.scaleMode==="fit"&&bA===aY.currItem.initialZoomLevel)},aZ=function(co,p){return(co&&(co.className.indexOf("pswp__scroll-wrap")===-1))&&(p(co)?co:aZ(co.parentNode,p))},f={},a9=function(co,p){f.prevent=!aZ(co.target,Y.isClickableElement);ak("preventDragEvent",co,p,f);return f.prevent},bI=function(cp,co){co.x=cp.pageX;co.y=cp.pageY;co.id=cp.identifier;return co},o=function(cp,co,p){p.x=(cp.x+co.x)*0.5;p.y=(cp.y+co.y)*0.5},bt=function(co,p,cq){if(co-ax>50){var cp=z.length>2?z.shift():{};cp.x=p;cp.y=cq;z.push(cp);ax=co}},n=function(){var p=ah.y-aY.currItem.initialPosition.y;return 1-Math.abs(p/(bU.y/2))},b3={},b2={},bJ=[],ar,aR=function(p){while(bJ.length>0){bJ.pop()}if(!ad){if(p.type.indexOf("touch")>-1){if(p.touches&&p.touches.length>0){bJ[0]=bI(p.touches[0],b3);if(p.touches.length>1){bJ[1]=bI(p.touches[1],b2)}}}else{b3.x=p.pageX;b3.y=p.pageY;b3.id="";bJ[0]=b3}}else{ar=0;a5.forEach(function(co){if(ar===0){bJ[0]=co}else{if(ar===1){bJ[1]=co}}ar++})}return bJ},h=function(co,cx){var cq;var cu=0;var cv=ah[co]+cx[co];var cs;var cp=cx[co]>0;var cw=aD.x+cx.x;var cr=aD.x-cg.x;if(cv>cd.min[co]||cv<cd.max[co]){cq=Y.panEndFriction}else{cq=1}cv=ah[co]+cx[co]*cq;var p;var ct;if(Y.allowPanToNext||bA===aY.currItem.initialZoomLevel){if(!be){ct=cw}else{if(bc==="h"&&co==="x"&&!cf){if(cp){if(cv>cd.min[co]){cq=Y.panEndFriction;cu=cd.min[co]-cv;cs=cd.min[co]-cl[co]}if((cs<=0||cr<0)&&aO()>1){ct=cw;if(cr<0&&cw>cg.x){ct=cg.x}}else{if(cd.min.x!==cd.max.x){p=cv}}}else{if(cv<cd.max[co]){cq=Y.panEndFriction;cu=cv-cd.max[co];cs=cl[co]-cd.max[co]}if((cs<=0||cr>0)&&aO()>1){ct=cw;if(cr>0&&cw<cg.x){ct=cg.x}}else{if(cd.min.x!==cd.max.x){p=cv}}}}}if(co==="x"){if(ct!==undefined){Z(ct,true);if(ct===cg.x){J=false}else{J=true}}if(cd.min.x!==cd.max.x){if(p!==undefined){ah.x=p}else{if(!J){ah.x+=cx.x*cq}}}return ct!==undefined}}if(!U){if(!J){if(bA>aY.currItem.fitRatio){ah[co]+=cx[co]*cq}}}},bR=function(cq){if(cq.type==="mousedown"&&cq.button>0){return}if(bp){cq.preventDefault();return}if(ac&&cq.type==="mousedown"){return}if(a9(cq,true)){cq.preventDefault()}ak("pointerDown");if(ad){var co=br.arraySearch(a5,cq.pointerId,"id");if(co<0){co=a5.length}a5[co]={x:cq.pageX,y:cq.pageY,id:cq.pointerId}}var p=aR(cq),cp=p.length;aq=null;aV();if(!bM||cp===1){bM=ap=true;br.bind(window,by,aY);t=c=aM=bj=J=ae=bm=cf=false;bc=null;ak("firstTouchStart",p);a0(cl,ah);Q.x=Q.y=0;a0(a6,p[0]);a0(b5,a6);cg.x=bB.x*bi;z=[{x:a6.x,y:a6.y}];ax=d=al();aF(bA,true);ca();ci()}if(!a8&&cp>1&&!U&&!J){bF=bA;cf=false;a8=bm=true;Q.y=Q.x=0;a0(cl,ah);a0(bv,p[0]);a0(bO,p[1]);o(bv,bO,i);an.x=Math.abs(i.x)-ah.x;an.y=Math.abs(i.y)-ah.y;K=M=aK(bv,bO)}},aI=function(cs){cs.preventDefault();if(ad){var co=br.arraySearch(a5,cs.pointerId,"id");if(co>-1){var cr=a5[co];cr.x=cs.pageX;cr.y=cs.pageY}}if(bM){var cp=aR(cs);if(!bc&&!ae&&!a8){var cq=Math.abs(cp[0].x-a6.x)-Math.abs(cp[0].y-a6.y);if(Math.abs(cq)>=S){bc=cq>0?"h":"v";aq=cp}}else{aq=cp}}},bZ=function(){if(!aq){return}var cq=aq.length;if(cq===0){return}a0(bv,aq[0]);m.x=bv.x-a6.x;m.y=bv.y-a6.y;if(a8&&cq>1){a6.x=bv.x;a6.y=bv.y;if(!m.x&&!m.y&&R(aq[1],bO)){return}a0(bO,aq[1]);if(!cf){cf=true;ak("zoomGestureStarted")}var p=aK(bv,bO);var ct=G(p);if(ct>aY.currItem.initialZoomLevel+aY.currItem.initialZoomLevel/15){c=true}var cp=1;if(ct<aY.currItem.minZoom){if(Y.pinchToClose&&!c&&bF<=aY.currItem.initialZoomLevel){var cs=aY.currItem.minZoom-ct;var cr=1-cs/(aY.currItem.minZoom/1.2);e(cr);ak("onPinchClose",cr);aM=true}else{cp=(aY.currItem.minZoom-ct)/(aY.currItem.minZoom);if(cp>1){cp=1}ct=aY.currItem.minZoom-(cp)*(aY.currItem.minZoom/3)}}else{if(ct>aY.currItem.maxZoom){cp=(ct-aY.currItem.maxZoom)/(aY.currItem.minZoom*6);if(cp>1){cp=1}ct=aY.currItem.maxZoom+(cp)*(aY.currItem.minZoom)}}if(cp!==1){if(cp<0){cp=0}}K=p;o(bv,bO,j);Q.x+=j.x-i.x;Q.y+=j.y-i.y;a0(i,j);ah.x=aJ("x",ct);ah.y=aJ("y",ct);t=ct>bA;bA=ct;ag()}else{if(!bc){return}if(ap){ap=false;if(Math.abs(m.x)>=S){m.x-=aq[0].x-b5.x}if(Math.abs(m.y)>=S){m.y-=aq[0].y-b5.y}}a6.x=bv.x;a6.y=bv.y;if(m.x===0&&m.y===0){return}if(bc==="v"&&Y.closeOnVerticalDrag){if(!cn()){Q.y+=m.y;ah.y+=m.y;var cu=n();bj=true;ak("onVerticalDrag",cu);e(cu);ag();return}}bt(al(),bv.x,bv.y);ae=true;cd=aY.currItem.bounds;var co=h("x",m);if(!co){h("y",m)}ag()}},F=function(cv){if(a4.isOldAndroid){if(ac&&cv.type==="mouseup"){return}if(cv.type.indexOf("touch")>-1){clearTimeout(ac);ac=setTimeout(function(){ac=0},600)}}ak("pointerUp");if(a9(cv,false)){cv.preventDefault()}var cp;if(ad){var cq=br.arraySearch(a5,cv.pointerId,"id");if(cq>-1){cp=a5.splice(cq,1)[0];if(navigator.pointerEnabled){cp.type=cv.pointerType||"mouse"}else{var cu={4:"mouse",2:"touch",3:"pen"};cp.type=cu[cv.pointerType];if(!cp.type){cp.type=cv.pointerType||"mouse"}}}}var co=aR(cv),p,cw=co.length;if(cv.type==="mouseup"){cw=0}if(cw===2){aq=null;return true}if(cw===1){a0(b5,co[0])}if(cw===0&&!bc&&!U){if(!cp){if(cv.type==="mouseup"){cp={x:cv.pageX,y:cv.pageY,type:"mouse"}}else{if(cv.changedTouches&&cv.changedTouches[0]){cp={x:cv.changedTouches[0].pageX,y:cv.changedTouches[0].pageY,type:"touch"}}}}ak("touchRelease",cv,cp)}var cy=-1;if(cw===0){bM=false;br.unbind(window,by,aY);ca();if(a8){cy=0}else{if(ai!==-1){cy=al()-ai}}}ai=cw===1?al():-1;if(cy!==-1&&cy<150){p="zoom"}else{p="swipe"}if(a8&&cw<2){a8=false;if(cw===1){p="zoomPointerUp"}ak("zoomGestureEnded")}aq=null;if(!ae&&!cf&&!U&&!bj){return}aV();if(!aw){aw=bY()}aw.calculateSwipeSpeed("x");if(bj){var cr=n();if(cr<0.6){aY.close()}else{var cs=ah.y,cx=aA;av("verticalDrag",0,1,300,br.easing.cubic.out,function(cz){ah.y=(aY.currItem.initialPosition.y-cs)*cz+cs;e((1-cx)*cz+cx);ag()});ak("onVerticalDrag",1)}return}if((J||U)&&cw===0){var ct=X(p,aw);if(ct){return}p="zoomPointerUp"}if(U){return}if(p!=="swipe"){A();return}if(!J&&bA>aY.currItem.fitRatio){aT(aw)}},bY=function(){var cp,co;var p={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(cq){if(z.length>1){cp=al()-ax+50;co=z[z.length-2][cq]}else{cp=al()-d;co=b5[cq]}p.lastFlickOffset[cq]=a6[cq]-co;p.lastFlickDist[cq]=Math.abs(p.lastFlickOffset[cq]);if(p.lastFlickDist[cq]>20){p.lastFlickSpeed[cq]=p.lastFlickOffset[cq]/cp}else{p.lastFlickSpeed[cq]=0}if(Math.abs(p.lastFlickSpeed[cq])<0.1){p.lastFlickSpeed[cq]=0}p.slowDownRatio[cq]=0.95;p.slowDownRatioReverse[cq]=1-p.slowDownRatio[cq];p.speedDecelerationRatio[cq]=1},calculateOverBoundsAnimOffset:function(cq,cr){if(!p.backAnimStarted[cq]){if(ah[cq]>cd.min[cq]){p.backAnimDestination[cq]=cd.min[cq]}else{if(ah[cq]<cd.max[cq]){p.backAnimDestination[cq]=cd.max[cq]}}if(p.backAnimDestination[cq]!==undefined){p.slowDownRatio[cq]=0.7;p.slowDownRatioReverse[cq]=1-p.slowDownRatio[cq];if(p.speedDecelerationRatioAbs[cq]<0.05){p.lastFlickSpeed[cq]=0;p.backAnimStarted[cq]=true;av("bounceZoomPan"+cq,ah[cq],p.backAnimDestination[cq],cr||300,br.easing.sine.out,function(cs){ah[cq]=cs;ag()})}}}},calculateAnimOffset:function(cq){if(!p.backAnimStarted[cq]){p.speedDecelerationRatio[cq]=p.speedDecelerationRatio[cq]*(p.slowDownRatio[cq]+p.slowDownRatioReverse[cq]-p.slowDownRatioReverse[cq]*p.timeDiff/10);p.speedDecelerationRatioAbs[cq]=Math.abs(p.lastFlickSpeed[cq]*p.speedDecelerationRatio[cq]);p.distanceOffset[cq]=p.lastFlickSpeed[cq]*p.speedDecelerationRatio[cq]*p.timeDiff;ah[cq]+=p.distanceOffset[cq]}},panAnimLoop:function(){if(af.zoomPan){af.zoomPan.raf=a2(p.panAnimLoop);p.now=al();p.timeDiff=p.now-p.lastNow;p.lastNow=p.now;p.calculateAnimOffset("x");p.calculateAnimOffset("y");ag();p.calculateOverBoundsAnimOffset("x");p.calculateOverBoundsAnimOffset("y");if(p.speedDecelerationRatioAbs.x<0.05&&p.speedDecelerationRatioAbs.y<0.05){bh("zoomPan");return}}}};return p},aT=function(p){p.calculateSwipeSpeed("y");cd=aY.currItem.bounds;p.backAnimDestination={};p.backAnimStarted={};if(Math.abs(p.lastFlickSpeed.x)<=0.05&&Math.abs(p.lastFlickSpeed.y)<=0.05){p.speedDecelerationRatioAbs.x=p.speedDecelerationRatioAbs.y=0;p.calculateOverBoundsAnimOffset("x");p.calculateOverBoundsAnimOffset("y");return true}x("zoomPan");p.lastNow=al();p.panAnimLoop()},X=function(p,cp){var cq;if(!U){b7=bz}var co;if(p==="swipe"){var ct=a6.x-b5.x;if(ct>aB&&(cp.lastFlickDist.x<10||cp.lastFlickOffset.x>20)){co=-1}else{if(ct<-aB&&(cp.lastFlickDist.x<10||cp.lastFlickOffset.x<-20)){co=1}}}var cs;if(co){bz+=co;if(bz<0){bz=Y.loop?aO()-1:0;cs=true}else{if(bz>=aO()){bz=Y.loop?0:aO()-1;cs=true}}if(!cs||Y.loop){aS+=co;bi-=co;cq=true}}var cu=bB.x*bi;var cr=Math.abs(cu-aD.x);var cv;if(!cq&&cu>aD.x!==cp.lastFlickSpeed.x>0){cv=333}else{cv=Math.abs(cp.lastFlickSpeed.x)>0?cr/Math.abs(cp.lastFlickSpeed.x):333;cv=Math.min(cv,400);cv=Math.max(cv,250)}if(b7===bz){cq=false}U=true;av("mainScroll",aD.x,cu,cv,br.easing.cubic.out,Z,function(){aV();U=false;b7=-1;if(cq||b7!==bz){aY.updateCurrItem()}ak("mainScrollAnimComplete")});if(cq){aY.updateCurrItem(true)}return cq},A=function(){var co=bA;if(bA<aY.currItem.minZoom){co=aY.currItem.minZoom}else{if(bA>aY.currItem.maxZoom){co=aY.currItem.maxZoom}}var cq=1,p,cp=aA;if(aM&&!t&&!c&&bA<aY.currItem.minZoom){aY.close();return true}if(aM){p=function(cr){e((cq-cp)*cr+cp)}}aY.zoomTo(co,0,300,br.easing.cubic.out,p);return true};var aQ,aP={},b={},w=[],bC,bp,bX={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:false,preload:[1,1],getNumItemsFn:function(){return aQ.length}};var bu,aO,y,N=function(cr,p,cu){if(cr.src&&!cr.loadError){var cs=!cu;if(cs){if(!cr.vGap){cr.vGap={top:0,bottom:0}}ak("parseVerticalMargin",cr)}aP.x=p.x;aP.y=p.y-cr.vGap.top-cr.vGap.bottom;if(cs){var ct=aP.x/cr.w;var cp=aP.y/cr.h;cr.fitRatio=ct<cp?ct:cp;cr.fillRatio=ct>cp?ct:cp;var co=Y.scaleMode;if(co==="orig"){cu=1}else{if(co==="fit"){cu=cr.fitRatio}else{if(co==="fill"){cu=cr.fillRatio}}}if(cu>1){cu=1}cr.initialZoomLevel=cu;cr.maxZoom=2;cr.minZoom=cu;if(!cr.bounds){cr.bounds=bd()}}if(!cu){return}b.x=cr.w*cu;b.y=cr.h*cu;var cq=cr.bounds;cq.center.x=Math.round((aP.x-b.x)/2);cq.center.y=Math.round((aP.y-b.y)/2)+cr.vGap.top;cq.max.x=(b.x>aP.x)?Math.round(aP.x-b.x):cq.center.x;cq.max.y=(b.y>aP.y)?Math.round(aP.y-b.y)+cr.vGap.top:cq.center.y;cq.min.x=(b.x>aP.x)?0:cq.center.x;cq.min.y=(b.y>aP.y)?cr.vGap.top:cq.center.y;if(cs&&cu===cr.initialZoomLevel){cr.initialPosition=cq.center}return cq}else{cr.w=cr.h=0;cr.initialZoomLevel=cr.maxZoom=cr.minZoom=cr.fitRatio=cr.fillRatio=1;cr.bounds=bd();cr.initialPosition=cr.bounds.center;return cr.bounds||bd()}return false},ba=function(cq,cs,cp,co,ct,cr){var p;if(cs.loadError){return}if(!ct&&(b9||Y.alwaysFadeIn)&&(cq===bz||aY.isMainScrollAnimating()||(aY.isDragging()&&!aY.isZooming()))){p=true}if(co){if(p){co.style.opacity=0}cs.imageAppended=true;cp.appendChild(co);if(p){setTimeout(function(){co.style.opacity=1;if(cr){setTimeout(function(){if(cs&&cs.loaded&&cs.placeholder){cs.placeholder.style.display="none";cs.placeholder=null}},500)}},50)}}},aL=function(co){co.loading=true;co.loaded=false;var p=co.img=br.createEl("pswp__img","img");var cp=function(){co.loading=false;co.loaded=true;if(co.loadComplete){co.loadComplete(co)}else{co.img=null}p.onload=p.onerror=null;p=null};p.onload=cp;p.onerror=function(){co.loadError=true;cp()};p.src=co.src;return p},bl=function(p,co){if(p.src&&p.loadError&&p.container){if(co){p.container.innerHTML=""}p.container.innerHTML=Y.errorMsg.replace("%url%",p.src);return true}},bd=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},u=function(){if(w.length){var p;for(var co=0;co<w.length;co++){p=w[co];if(p.holder.index===p.index){ba(p.index,p.item,p.baseDiv,p.img)}}w=[]}};aG("Controller",{publicMethods:{lazyLoadItem:function(p){p=bs(p);var co=bu(p);if(!co||!co.src||co.loaded||co.loading){return}ak("gettingData",p,co);aL(co)},initController:function(){br.extend(Y,bX,true);aY.items=aQ=ch;bu=aY.getItemAt;aO=Y.getNumItemsFn;y=Y.loop;if(aO()<3){Y.loop=false}a1("beforeChange",function(ct){var cs=Y.preload,cp=ct===null?true:(ct>0),cq=Math.min(cs[0],aO()),cr=Math.min(cs[1],aO()),co;for(co=1;co<=(cp?cr:cq);co++){aY.lazyLoadItem(bz+co)}for(co=1;co<=(cp?cq:cr);co++){aY.lazyLoadItem(bz-co)}});a1("initialLayout",function(){aY.currItem.initialLayout=Y.getThumbBoundsFn&&Y.getThumbBoundsFn(bz)});a1("mainScrollAnimComplete",u);a1("initialZoomInEnd",u);a1("destroy",function(){var co;for(var p=0;p<aQ.length;p++){co=aQ[p];if(co.container){co.container=null}if(co.placeholder){co.placeholder=null}if(co.img){co.img=null}if(co.preloader){co.preloader=null}if(co.loadError){co.loaded=co.loadError=false}}w=null})},getItemAt:function(p){if(p>=0){return aQ[p]!==undefined?aQ[p]:false}return false},allowProgressiveImg:function(){return Y.forceProgressiveLoading||!b9||Y.mouseUsed||screen.width>1200},setContent:function(cr,cq){if(Y.loop){cq=bs(cq)}var p=aY.getItemAt(cr.index);if(p){p.container=null}var cs=aY.getItemAt(cq),cp;if(!cs){cr.el.innerHTML="";return}ak("gettingData",cq,cs);cr.index=cq;cr.item=cs;var co=cs.container=br.createEl("pswp__zoom-wrap");if(!cs.src&&cs.html){if(cs.html.tagName){co.appendChild(cs.html)}else{co.innerHTML=cs.html}}bl(cs);if(cs.src&&!cs.loadError&&!cs.loaded){cs.loadComplete=function(cu){if(!E){return}cu.img.style.webkitBackfaceVisibility="hidden";if(cr.index===cq){if(bl(cu,true)){cu.loadComplete=cu.img=null;N(cu,bU);ck(cu);if(cr.index===bz){aY.updateCurrZoomItem()}return}if(!cu.imageAppended){if(a4.transform&&(U||bp)){w.push({item:cu,baseDiv:co,img:cu.img,index:cq,holder:cr})}else{ba(cq,cu,co,cu.img,U||bp)}}else{if(!bp&&cu.placeholder){cu.placeholder.style.display="none";cu.placeholder=null}}}cu.loadComplete=null;cu.img=null;ak("imageLoadComplete",cq,cu)};if(br.features.transform){var ct=br.createEl("pswp__img pswp__img--placeholder"+(cs.msrc?"":" pswp__img--placeholder--blank"),cs.msrc?"img":"");if(cs.msrc){ct.src=cs.msrc}ct.style.width=cs.w+"px";ct.style.height=cs.h+"px";co.appendChild(ct);cs.placeholder=ct}if(!cs.loading){aL(cs)}if(aY.allowProgressiveImg()){if(!bC&&a4.transform){w.push({item:cs,baseDiv:co,img:cs.img,index:cq,holder:cr})}else{ba(cq,cs,co,cs.img,true,true)}}}else{if(cs.src&&!cs.loadError){cp=br.createEl("pswp__img","img");cp.style.webkitBackfaceVisibility="hidden";cp.style.opacity=1;cp.src=cs.src;ba(cq,cs,co,cp,true)}}N(cs,bU);if(!bC&&cq===bz){be=co.style;aH(cs,(cp||cs.img))}else{ck(cs)}cr.el.innerHTML="";cr.el.appendChild(co)},cleanSlide:function(p){if(p.img){p.img.onload=p.img.onerror=null}p.loaded=p.loading=p.img=p.imageAppended=false}}});var bq,T={},v=function(co,cq,p){var cp=document.createEvent("CustomEvent");cp.initCustomEvent("pswpTap",true,true,{origEvent:co,target:co.target,releasePoint:cq,pointerType:p||"touch"});co.target.dispatchEvent(cp)};aG("Tap",{publicMethods:{initTap:function(){a1("firstTouchStart",aY.onTapStart);a1("touchRelease",aY.onTapRelease);a1("destroy",function(){T={};bq=null})},onTapStart:function(p){if(p.length>1){clearTimeout(bq);bq=null}},onTapRelease:function(co,cp){if(!cp){return}if(!ae&&!bm&&!cb){var cq=cp;if(bq){clearTimeout(bq);bq=null;if(bH(cq,T)){ak("doubleTap",cq);return}}var p=co.target.tagName.toLowerCase();if(cp.type==="mouse"){v(co,cp,"mouse");return}if(p==="button"||br.hasClass(co.target,"pswp__single-tap")){v(co,cp);return}a0(T,cq);bq=setTimeout(function(){v(co,cp);bq=null},300)}}}});var g;aG("DesktopZoom",{publicMethods:{handleMouseWheel:function(p){if(bA<=aY.currItem.fitRatio){return true}p.preventDefault();p.stopPropagation();g.x=0;if("deltaX" in p){g.x=p.deltaX;g.y=p.deltaY}else{if("wheelDelta" in p){if(p.wheelDeltaX){g.x=-0.16*p.wheelDeltaX}if(p.wheelDeltaY){g.y=-0.16*p.wheelDeltaY}else{g.y=-0.16*p.wheelDelta}}else{if("detail" in p){g.y=p.detail}else{return}}}aF(bA,true);aY.panTo(ah.x-g.x,ah.y-g.y)},toggleDesktopZoom:function(co){co=co||{x:bU.x/2,y:bU.y/2+ay};var p=bA===1;aY.mouseZoomedIn=!p;aY.zoomTo(p?aY.currItem.initialZoomLevel:1,co,333);br[(!p?"add":"remove")+"Class"](aX,"pswp--zoomed-in")},setupDesktopZoom:function(cp){g={};var p="wheel mousewheel DOMMouseScroll";a1("bindEvents",function(){br.bind(aX,p,aY.handleMouseWheel)});a1("unbindEvents",function(){if(g){br.unbind(aX,p,aY.handleMouseWheel)}});aY.mouseZoomedIn=false;var cr,cq=function(){if(aY.mouseZoomedIn){br.removeClass(aX,"pswp--zoomed-in");aY.mouseZoomedIn=false}if(bA<1){br.addClass(aX,"pswp--zoom-allowed")}else{br.removeClass(aX,"pswp--zoom-allowed")}co()},co=function(){if(cr){br.removeClass(aX,"pswp--dragging");cr=false}};a1("resize",cq);a1("afterChange",cq);a1("pointerDown",function(){if(aY.mouseZoomedIn){cr=true;br.addClass(aX,"pswp--dragging")}});a1("pointerUp",co);if(!cp){cq()}},initDesktopZoom:function(){if(bb){return}if(b9){a1("mouseUsed",function(){aY.setupDesktopZoom()})}else{aY.setupDesktopZoom(true)}}}});var aW={history:true,galleryUID:1};var bT,bw,bQ,W,cm,aj,bk,bD,bW,au,bf,k,L=function(){return bf.hash.substring(1)},cj=function(){if(bT){clearTimeout(bT)}if(bQ){clearTimeout(bQ)}},cc=function(){var cp=L(),cr={};if(cp.length<5){return cr}var co=cp.split("&");for(var p=0;p<co.length;p++){if(!co[p]){continue}var cq=co[p].split("=");if(cq.length<2){continue}cr[cq[0]]=cq[1]}cr.pid=parseInt(cr.pid,10)-1;if(cr.pid<0){cr.pid=0}return cr},aC=function(){if(bQ){clearTimeout(bQ)}if(cb||bM){bQ=setTimeout(aC,500);return}if(W){clearTimeout(bw)}else{W=true}var p=bk+"&gid="+Y.galleryUID+"&pid="+(bz+1);if(!bD){if(bf.hash.indexOf(p)===-1){au=true}}var co=bf.href.split("#")[0]+"#"+p;if(k){if("#"+p!==window.location.hash){history[bD?"replaceState":"pushState"]("",document.title,co)}}else{if(bD){bf.replace(co)}else{bf.hash=p}}bD=true;bw=setTimeout(function(){W=false},60)};aG("History",{publicMethods:{initHistory:function(){br.extend(Y,aW,true);if(!Y.history){return}bf=window.location;au=false;bW=false;bD=false;bk=L();k=("pushState" in history);if(bk.indexOf("gid=")>-1){bk=bk.split("&gid=")[0];bk=bk.split("?gid=")[0]}a1("afterChange",aY.updateURL);a1("unbindEvents",function(){br.unbind(window,"hashchange",aY.onHashChange)});var p=function(){aj=true;if(!bW){if(au){history.back()}else{if(bk){bf.hash=bk}else{if(k){history.pushState("",document.title,bf.pathname+bf.search)}else{bf.hash=""}}}}cj()};a1("unbindEvents",function(){if(bx){p()}});a1("destroy",function(){if(!aj){p()}});a1("firstUpdate",function(){bz=cc().pid});var co=bk.indexOf("pid=");if(co>-1){bk=bk.substring(0,co);if(bk.slice(-1)==="&"){bk=bk.slice(0,-1)}}setTimeout(function(){if(E){br.bind(window,"hashchange",aY.onHashChange)}},40)},onHashChange:function(){if(L()===bk){bW=true;aY.close();return}if(!W){cm=true;aY.goTo(cc().pid);cm=false}},updateURL:function(){cj();if(cm){return}if(!bD){aC()}else{bT=setTimeout(aC,800)}}}});br.extend(aY,ce)};return a});
/*! PhotoSwipe Default UI - 4.0.2 - 2014-12-21
* http://photoswipe.com
* Copyright (c) 2014 Dmitry Semenov; */
(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof exports==="object"){module.exports=b()}else{a.PhotoSwipeUI_Default=b()}}})(this,function(){var a=function(o,t){var u=this;var A=false,C=true,g,B,c,z,s,r,H,i=true,d,I,e,F,m,w={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4000,timeToIdleOutside:1000,loadingIndicatorDelay:1000,addCaptionHTMLFn:function(J,K){if(!J.title){K.children[0].innerHTML="";return false}K.children[0].innerHTML=J.title;return true},closeEl:true,captionEl:true,fullscreenEl:true,zoomEl:true,shareEl:true,counterEl:true,arrowEl:true,preloaderEl:true,tapToClose:false,tapToToggleControls:true,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:true}],indexIndicatorSep:" / "},q,b;var E=function(O){if(q){return true}O=O||window.event;var N=O.target||O.srcElement,J,P=N.className,L;for(var K=0;K<f.length;K++){J=f[K];if(J.onTap&&P.indexOf("pswp__"+J.name)>-1){J.onTap();L=true}}if(L){if(O.stopPropagation){O.stopPropagation()}q=true;var M=t.features.isOldAndroid?600:30;b=setTimeout(function(){q=false},M)}},n=function(){return !o.likelyTouchDevice||o.options.mouseUsed||screen.width>1200},p=function(){i=!i;if(!i){t[(i?"add":"remove")+"Class"](H,"pswp__share-modal--hidden");setTimeout(function(){if(!i){t.addClass(H,"pswp__share-modal--fade-in")}},30)}else{t.removeClass(H,"pswp__share-modal--fade-in");setTimeout(function(){if(i){t[(i?"add":"remove")+"Class"](H,"pswp__share-modal--hidden")}},300)}if(!i){j()}return false},G=function(K){K=K||window.event;var J=K.target||K.srcElement;if(!J.href){return false}if(J.hasAttribute("download")){return true}window.open(J.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100));if(!i){p()}return false},j=function(){var M="",K,L;for(var J=0;J<o.options.shareButtons.length;J++){K=o.options.shareButtons[J];L=K.url.replace("{{url}}",encodeURIComponent(window.location.href)).replace("{{image_url}}",encodeURIComponent(o.currItem.src||"")).replace("{{raw_image_url}}",o.currItem.src||"").replace("{{text}}",encodeURIComponent(o.currItem.title||""));M+='<a href="'+L+'" target="_blank" class="pswp__share--'+K.id+'"'+(K.download?"download":"")+">"+K.label+"</a>"}H.children[0].innerHTML=M;H.children[0].onclick=G},l=function(K){for(var J=0;J<o.options.closeElClasses.length;J++){if(t.hasClass(K,"pswp__"+o.options.closeElClasses[J])){return true}}},h,k,x=0,v=function(){clearTimeout(k);x=0;if(I){u.setIdle(false)}},y=function(J){J=J?J:window.event;var K=J.relatedTarget||J.toElement;if(!K||K.nodeName==="HTML"){clearTimeout(k);k=setTimeout(function(){u.setIdle(true)},o.options.timeToIdleOutside)}},D=function(J){if(F!==J){t[(J?"remove":"add")+"Class"](e,"pswp__preloader--active");F=J}};var f=[{name:"caption",option:"captionEl",onInit:function(J){c=J}},{name:"share-modal",option:"shareEl",onInit:function(J){H=J},onTap:function(){p()}},{name:"button--share",option:"shareEl",onInit:function(J){r=J},onTap:function(){p()}},{name:"button--zoom",option:"zoomEl",onTap:o.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(J){s=J}},{name:"button--close",option:"closeEl",onTap:o.close},{name:"button--arrow--left",option:"arrowEl",onTap:o.prev},{name:"button--arrow--right",option:"arrowEl",onTap:o.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){if(g.isFullscreen()){g.exit()}else{g.enter()}}},{name:"preloader",option:"preloaderEl",onInit:function(J){e=J}}];u.init=function(){t.extend(o.options,w,true);B=o.scrollWrap.children[1];var N=o.listen;N("onVerticalDrag",function(P){if(C&&P<0.95){u.hideControls()}else{if(!C&&P>=0.95){u.showControls()}}});var O;N("onPinchClose",function(P){if(C&&P<0.9){u.hideControls();O=true}else{if(O&&!C&&P>0.9){u.showControls()}}});N("zoomGestureEnded",function(){O=false;if(O&&!C){u.showControls()}});N("beforeChange",u.update);N("doubleTap",function(P){var Q=o.currItem.initialZoomLevel;if(o.getZoomLevel()!==Q){o.zoomTo(Q,P,333)}else{o.zoomTo(Q<0.7?1:1.5,P,333)}});if(o.options.timeToIdle){N("mouseUsed",function(){t.bind(document,"mousemove",v);t.bind(document,"mouseout",y);h=setInterval(function(){x++;if(x===2){u.setIdle(true)}},o.options.timeToIdle/2)})}N("preventDragEvent",function(S,P,R){var Q=S.target||S.srcElement;if(Q&&Q.className&&S.type.indexOf("mouse")>-1&&(Q.className.indexOf("__caption")>0||(/(SMALL|STRONG|EM)/i).test(Q.tagName))){R.prevent=false}});N("bindEvents",function(){t.bind(B,"pswpTap click",E);t.bind(o.scrollWrap,"pswpTap",u.onGlobalTap);if(!o.likelyTouchDevice){t.bind(o.scrollWrap,"mouseover",u.onMouseOver)}});N("unbindEvents",function(){if(!i){p()}if(h){clearInterval(h)}t.unbind(document,"mouseout",y);t.unbind(document,"mousemove",v);t.unbind(B,"pswpTap click",E);t.unbind(o.scrollWrap,"pswpTap",u.onGlobalTap);t.unbind(o.scrollWrap,"mouseover",u.onMouseOver);if(g){t.unbind(document,g.eventK,u.updateFullscreen);if(g.isFullscreen()){w.hideAnimationDuration=0;g.exit()}g=null}});N("destroy",function(){if(o.options.captionEl){if(z){B.removeChild(z)}t.removeClass(c,"pswp__caption--empty")}if(H){H.children[0].onclick=null}t.removeClass(B,"pswp__ui--over-close");t.addClass(B,"pswp__ui--hidden");u.setIdle(false)});if(!o.options.showAnimationDuration){t.removeClass(B,"pswp__ui--hidden")}N("initialZoomIn",function(){if(o.options.showAnimationDuration){t.removeClass(B,"pswp__ui--hidden")}});N("initialZoomOut",function(){t.addClass(B,"pswp__ui--hidden")});N("parseVerticalMargin",function(R){var S=R.vGap;if(n()){var P=o.options.barsSize;if(o.options.captionEl&&P.bottom==="auto"){if(!z){z=t.createEl("pswp__caption pswp__caption--fake");z.appendChild(t.createEl("pswp__caption__center"));B.insertBefore(z,c);t.addClass(B,"pswp__ui--fit")}if(o.options.addCaptionHTMLFn(R,z,true)){var Q=z.clientHeight;S.bottom=parseInt(Q,10)||44}else{S.bottom=P.top}}else{S.bottom=P.bottom}S.top=P.top}else{S.top=S.bottom=0}});var M,L,K;var J=function(S){var Q=S.length;for(var R=0;R<Q;R++){M=S[R];L=M.className;for(var P=0;P<f.length;P++){K=f[P];if(L.indexOf("pswp__"+K.name)>-1){if(o.options[K.option]){t.removeClass(M,"pswp__element--disabled");if(K.onInit){K.onInit(M)}}else{t.addClass(M,"pswp__element--disabled")}}}}};J(B.children);J(B.children[0].children);if(o.options.shareEl&&r&&H){i=true}if(o.options.fullscreenEl){if(!g){g=u.getFullscreenAPI()}if(g){t.bind(document,g.eventK,u.updateFullscreen);u.updateFullscreen();t.addClass(o.template,"pswp--supports-fs")}else{t.removeClass(o.template,"pswp--supports-fs")}}if(o.options.preloaderEl){D(true);N("beforeChange",function(){clearTimeout(m);m=setTimeout(function(){if(o.currItem&&o.currItem.loading){if(!o.allowProgressiveImg()||(o.currItem.img&&!o.currItem.img.naturalWidth)){D(false)}}else{D(true)}},o.options.loadingIndicatorDelay)});N("imageLoadComplete",function(P,Q){if(o.currItem===Q){D(true)}})}};u.setIdle=function(J){I=J;t[(J?"add":"remove")+"Class"](B,"pswp__ui--idle")};u.update=function(){if(C&&o.currItem){u.updateIndexIndicator();if(o.options.captionEl){o.options.addCaptionHTMLFn(o.currItem,c);if(!o.currItem.title){t.addClass(c,"pswp__caption--empty")}else{t.removeClass(c,"pswp__caption--empty")}}A=true}else{A=false}};u.updateFullscreen=function(){t[(g.isFullscreen()?"add":"remove")+"Class"](o.template,"pswp--fs")};u.updateIndexIndicator=function(){if(o.options.counterEl){s.innerHTML=(o.getCurrentIndex()+1)+o.options.indexIndicatorSep+o.options.getNumItemsFn()}};u.onGlobalTap=function(K){K=K||window.event;var J=K.target||K.srcElement;if(q){return}if(K.detail&&K.detail.pointerType==="mouse"){if(l(J)){o.close()}if(t.hasClass(J,"pswp__img")){if(o.getZoomLevel()===1&&o.getZoomLevel()<=o.currItem.fitRatio){o.close()}else{o.toggleDesktopZoom(K.detail.releasePoint)}}}else{if(o.options.tapToToggleControls){if(C){u.hideControls()}else{u.showControls()}}if(o.options.tapToClose&&(t.hasClass(J,"pswp__img")||l(J))){o.close();return}}};u.onMouseOver=function(K){K=K||window.event;var J=K.target||K.srcElement;if(l(J)){t.addClass(B,"pswp__ui--over-close")}else{t.removeClass(B,"pswp__ui--over-close")}};u.hideControls=function(){t.addClass(B,"pswp__ui--hidden");C=false};u.showControls=function(){C=true;if(!A){u.update()}t.removeClass(B,"pswp__ui--hidden")};u.supportsFullscreen=function(){var J=document;return !!(J.exitFullscreen||J.mozCancelFullScreen||J.webkitExitFullscreen||J.msExitFullscreen)};u.getFullscreenAPI=function(){var L=document.documentElement,J,K="fullscreenchange";if(L.requestFullscreen){J={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:K}}else{if(L.mozRequestFullScreen){J={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+K}}else{if(L.webkitRequestFullscreen){J={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+K}}else{if(L.msRequestFullscreen){J={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}}}}}if(J){J.enter=function(){d=o.options.closeOnScroll;o.options.closeOnScroll=false;if(this.enterK==="webkitRequestFullscreen"){o.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)}else{return o.template[this.enterK]()}};J.exit=function(){o.options.closeOnScroll=d;return document[this.exitK]()};J.isFullscreen=function(){return document[this.elementK]}}return J}};return a});var initPhotoSwipeFromDOM=function(b){var j=function(m){var u=m.childNodes,l=u.length,p=[],o,q,r,t,s;for(var n=0;n<l;n++){o=u[n];if(o.nodeType!==1){continue}r=o.children[0];t=r.getAttribute("data-size").split("x");s={src:r.getAttribute("href"),w:parseInt(t[0],10),h:parseInt(t[1],10)};if(o.children.length>1){s.title=o.children[1].innerHTML}if(r.children.length>0){s.msrc=r.children[0].getAttribute("src")}s.el=o;p.push(s)}return p};var c=function c(l,i){return l&&(i(l)?l:c(l.parentNode,i))};var g=function(q){q=q||window.event;q.preventDefault?q.preventDefault():q.returnValue=false;var n=q.target||q.srcElement;var t=c(n,function(i){return i.tagName==="FIGURE"});if(!t){return}var r=t.parentNode,s=t.parentNode.childNodes,o=s.length,l=0,p;for(var m=0;m<o;m++){if(s[m].nodeType!==1){continue}if(s[m]===t){p=l;break}l++}if(p>=0){f(p,r)}return false};var h=function(){var n=window.location.hash.substring(1),p={};if(n.length<5){return p}var m=n.split("&");for(var l=0;l<m.length;l++){if(!m[l]){continue}var o=m[l].split("=");if(o.length<2){continue}p[o[0]]=o[1]}if(p.gid){p.gid=parseInt(p.gid,10)}if(!p.hasOwnProperty("pid")){return p}p.pid=parseInt(p.pid,10);return p};var f=function(p,q,m){var o=document.querySelectorAll(".pswp")[0],i,n,l;l=j(q);n={index:p,galleryUID:q.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(r){var u=l[r].el.getElementsByTagName("img")[0],t=window.pageYOffset||document.documentElement.scrollTop,s=u.getBoundingClientRect();return{x:s.left,y:s.top+t,w:s.width}},historyEnabled:false,focus:false};if(m){n.showAnimationDuration=0}i=new PhotoSwipe(o,PhotoSwipeUI_Default,l,n);i.init()};var k=document.querySelectorAll(b);for(var e=0,d=k.length;e<d;e++){k[e].setAttribute("data-pswp-uid",e+1);k[e].onclick=g}var a=h();if(a.pid>0&&a.gid>0){f(a.pid-1,k[a.gid-1],true)}};initPhotoSwipeFromDOM(".gallery");